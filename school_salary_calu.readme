# સ્કૂલ સેલરી કેલ્ક્યુલેશન સિસ્ટમ - સમજણ

## 1. મુખ્ય અભિગમ (Main Approach)
આપણે એક મુખ્ય ડિફરન્સ સેલરી રિપોર્ટ બનાવવાનો છે, પણ આ રિપોર્ટમાં બહુ બધી કેલ્ક્યુલેશન આવે છે. માટે આપણે નાના નાના રિપોર્ટ પહેલા બનાવીશું અને જ્યારે રિપોર્ટ બને ત્યારે તે રિપોર્ટની વેલ્યુ ડેટાબેઝમાં સેવ થશે. આ વેલ્યુને આપણે મુખ્ય રિપોર્ટમાં ડાયરેક્ટ એડ કરી શકીશું.

## 2. ટીચર ડિટેઇલ્સમાં કમિશન
ટીચર ડિટેઇલ્સમાં તમે જોશો કે 5th commission, 6th commission અને 7th commission છે જે પગાર પાઉન્ચ છે. દરેકની કેલ્ક્યુલેશન જુદી જુદી છે.

## 3. ટીચર ડિટેઇલ્સમાં Payable અને Paid ડેટા
ટીચર ડિટેઇલ્સમાં તમે ચેક કરો તો Payable અને Paid નો ડેટા જુદો જુદો છે. માટે આપણે Payable અને Paid ના રિપોર્ટ જુદા જુદા બનાવવા પડશે. અને છેલ્લે ડેટાબેઝમાંથી વેલ્યુ લાઈને ડિફરન્સ રિપોર્ટ બનાવવું.

## 4. Basic વિશે સમજણ
Basic માં આપણે:
- **XBasic** - માત્ર કેલ્ક્યુલેશન માટે વાપરવાનું
- **MBasic** - મુખ્ય basic જે ટીચરનું મુખ્ય basic હશે
- **Basic** - જે MBasic માંથી LWP અને HLWP ના working day મુજબ તૈયાર થશે

## 5. Yearly Increment વિશે
દરેક 5th commission, 6th commission અને 7th commission માટે yearly increment ની કેલ્ક્યુલેશન જુદી જુદી છે.

## 6. Higher Grade વિશે
ટીચર ડિટેઇલ્સમાં 1st higher grade, 2nd higher grade અને 3rd higher grade આપ્યા છે. આ higher grade જે date થી મધ્યે હોય તે date થી તેમના basic આ મુજબ update થવા જોઈએ.

## 7. રિપોર્ટની વાત
આપણે આ મુજબ રિપોર્ટ બનાવવા:
1. Payable 5th Commission Report
2. Paid 5th Commission Report  
3. Payable 6th Commission Report
4. Paid 6th Commission Report
5. Payable 7th Commission Report
6. Paid 7th Commission Report
7. Payable Old 6th Commission Report
8. Paid Old 6th Commission Report
9. Total Payable Report
10. Total Paid Report
11. Different Report

બધા રિપોર્ટ બને ત્યારે તે proper ડેટાબેઝમાં city, teacher મુજબ save થવા જોઈએ જેથી તેની value ને use થઈ શકે.

## 8. કૉમન કૉલમ
બધા રિપોર્ટના પહેલા કૉમન કૉલમ આ મુજબ હોવા જોઈએ:
- Sr.No
- Date  
- Month

## 9. રિપોર્ટની રેન્જ
બધા રિપોર્ટની રેન્જ આ મુજબ જોઈએ:
- **પહેલી row માં**: જે તે ટીચરની 1st higher grade ની date હોય તે date થી રિપોર્ટ start થવી જોઈએ
- **છેલ્લી row માં**: date 11-10-2022 અથવા તે પહેલા જો retirement date આવે તો retirement date સુધી જ રાખવી

રિપોર્ટમાં Date ના કૉલમમાં બધી જ row માં date ના આવવી જોઈએ, પણ જ્યાં 1st higher grade, 2nd higher grade, 3rd higher grade અને 5th commission date, 6th commission date અથવા 7th commission date આવે ત્યારે જ date લખેલી આવવી જોઈએ.

### ઉદાહરણ:
જો 1st higher grade date - 04-02-1996 અને 2nd higher grade date 24-5-2001 હોય તો:

| Sr.No | Date       | Month        |
|-------|------------|--------------|
| 1     | 04/02/1996 | February 1996|
| 2     |            | March 1996   |
| 3     |            | April 1996   |
| ...   |            | ...          |
| 23    | 23/5/2001  | May 2001     |
| 24    | 24/5/2001  | May 2001     | (2nd higher grade date)
| 25    |            | June 2001    |

## 10. ડેટાબેઝ સ્ટ્રક્ચર
દરેક રિપોર્ટ માટે ડેટાબેઝમાં આ કૉલમ હોવા જોઈએ:
- id (PRIMARY KEY)
- teacher_id
- city_name  
- report_type (payable/paid/different)
- commission_type (5th/6th/7th/old_6th)
- month
- year
- date
- basic_amount
- grade_pay_amount
- total_amount
- created_at

## 11. કેલ્ક્યુલેશન લોજિક
1. **XBasic કેલ્ક્યુલેશન**: મૂળ basic + grade pay
2. **MBasic કેલ્ક્યુલેશન**: XBasic + yearly increments
3. **Basic કેલ્ક્યુલેશન**: MBasic - LWP/HLWP deductions
4. **Commission કેલ્ક્યુલેશન**: Basic પર commission percentage
5. **Payable vs Paid**: Payable = calculated amount, Paid = actual paid amount
6. **Different**: Payable - Paid

## 12. API એન્ડપોઇન્ટ્સ
દરેક રિપોર્ટ માટે આ API બનાવવા:
- GET /api/reports/:type/:commission (payable/paid/different)
- POST /api/reports/calculate (calculate all reports)
- GET /api/reports/teacher/:teacherId
- GET /api/reports/city/:cityName

## 13. ફ્રન્ટએન્ડ કોમ્પોનેન્ટ્સ
- SalaryCalculationForm
- ReportDisplay
- TeacherSalaryReport
- CitySalaryReport
- CommissionBreakdown

આ મુજબ આપણે સ્ટેપ બાય સ્ટેપ કામ કરીશું અને દરેક રિપોર્ટ અલગથી બનાવીને પછી મુખ્ય ડિફરન્સ રિપોર્ટ બનાવીશું. 